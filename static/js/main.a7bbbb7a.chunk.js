(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a(26)},,,,,,function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),s=a.n(c),o=(a(17),a(6)),i=a.n(o),u=a(7),l=a(1),d=a(2),m=a(4),p=a(3),h=a(5),f=(a(20),a(21),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{class:"preloader-wrapper",id:"preloader"},r.a.createElement("div",{class:"wrapper"},r.a.createElement("div",{class:"loader-circle"}),r.a.createElement("div",{class:"loader-bottom"},"LOADING")))}}]),t}(r.a.Component)),g=(a(22),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.cart;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__container"},r.a.createElement("div",{className:"header__logo"}," "),r.a.createElement("div",{className:"header__cart"},r.a.createElement("div",{className:"header__cart-img"}),r.a.createElement("div",{className:"header__counter"},r.a.createElement("span",{className:"header__quantity"},e.length)),r.a.createElement("span",{className:"header__price"},e.reduce(function(e,t){return e+t.price*t.amount},0)/100))))}}]),t}(r.a.Component)),_=(a(23),a(10)),b=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onCategoryChange,a=e.categories,n=e.selectedCategory;return r.a.createElement("section",{className:"sidebar"},r.a.createElement("h2",{className:"sidebar__title"},"\u0422\u043e\u0432\u0430\u0440\u0438"),r.a.createElement("div",{className:"sidebar__category-container"},a.map(function(e){var a=_({sidebar__category:!0,sidebar__category_active:e.id===n});return r.a.createElement("p",{className:a,"data-id":e.id,onClick:function(){return t(e.id)}},e.title)})))}}]),t}(r.a.Component),v=(a(24),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.price,n=e.weight,c=e.imgUrl,s=e.onAdd,o=e.onDelete,i=e.cart;return r.a.createElement("div",{className:"products__item"},void 0===i.filter(function(e){return e.title===t})?r.a.createElement("button",{className:"products__button",onClick:function(){return s(t)}},"\u0414\u043e\u0434\u0430\u0442\u0438",r.a.createElement("div",{className:"products__cart-img"})):r.a.createElement("div",{className:"products__amount-counter"},r.a.createElement("button",{className:"products__button_minus products__button_counter",onClick:function(){return o(t)}},"-"),r.a.createElement("div",{className:"products__amount"},i.filter(function(e){return e.title===t}).map(function(e){return e.amount})),r.a.createElement("button",{className:"products__button_plus products__button_counter",onClick:function(){return s(t)}},"+")),r.a.createElement("div",{className:"products__picture"},r.a.createElement("img",{src:c,alt:t,className:"product__img"})),r.a.createElement("span",{className:"products__price"},(a/100).toFixed(2),r.a.createElement("span",null," \u0433\u0440\u043d")),r.a.createElement("p",{className:"products__name"},t),r.a.createElement("div",{className:"products__weight"},n," \u0433"))}}]),t}(r.a.Component)),E=(a(25),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.onAdd,n=e.amount,c=e.cart,s=e.onDelete;return r.a.createElement("section",{className:"products"},r.a.createElement("div",{className:"products__container"},r.a.createElement("h1",{className:"products__title"},t),r.a.createElement("div",{className:"products__items"},this.props.products.map(function(e){return r.a.createElement(v,{name:e.title,price:e.price,weight:e.weight,imgUrl:e.gallery[0].s150x150,key:e.title,onAdd:a,onDelete:s,amount:n,cart:c})}))))}}]),t}(r.a.Component)),y=function(){function e(){Object(l.a)(this,e),this.baseUrl="https://staging-stores-api.zakaz.ua/stores/default/categories/"}return Object(d.a)(e,[{key:"getCategory",value:function(){return fetch("".concat(this.baseUrl)).then(function(e){return e.json()})}},{key:"getProducts",value:function(e){var t=e.selectedCategory;return fetch("".concat(this.baseUrl).concat(t,"/products/")).then(function(e){return e.json()})}}]),e}(),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).getCategories=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.backend.getCategory();case 2:t=e.sent,a.setState({categories:t});case 4:case"end":return e.stop()}},e)})),a.getProducts=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.next=3,a.backend.getProducts({selectedCategory:a.state.selectedCategory});case 3:t=e.sent,a.setState({products:t.results,isLoading:!1});case 5:case"end":return e.stop()}},e)})),a.getAmount=function(){a.state.card.push({cart:[{amount:0}]}),a.setState({cart:a.state.cart}),console.log(a.state.cart)},a.deleteFromCart=function(e){var t=a.state.products.find(function(t){return t.title===e}),n=a.state.cart.find(function(e){return e.title===t.title});n.amount>1?n.amount--:a.state.cart.pop({title:t.title,price:t.price,amount:0}),console.log(a.state.cart),a.setState({cart:a.state.cart})},a.addToCart=function(e){var t=a.state.products.find(function(t){return t.title===e}),n=a.state.cart.find(function(e){return e.title===t.title});n?n.amount++:a.state.cart.push({title:t.title,price:t.price,amount:1}),a.setState({cart:a.state.cart})},a.onCategoryChange=function(e){a.setState({selectedCategory:e},function(){a.getProducts()})},a.state={categories:[],products:[],selectedCategory:"",isLoading:!1,cart:[]},a.backend=new y,a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.getCategory();case 2:t=e.sent,this.setState({selectedCategory:t[0].id,categories:t}),this.getProducts();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.categories.filter(function(e){return"\u041f\u0435\u043a\u0430\u0440\u043d\u044f"===e.title}).map(function(e){return e.title});return r.a.createElement("div",{className:"container"},r.a.createElement(g,{cart:this.state.cart}),r.a.createElement("main",{className:"main"},r.a.createElement(b,{categories:this.state.categories,selected:this.state.selectedCategory,onCategoryChange:this.onCategoryChange,selectedCategory:this.state.selectedCategory}),this.state.isLoading?r.a.createElement(f,null):r.a.createElement(E,{products:this.state.products,title:e,onAdd:this.addToCart,onDelete:this.deleteFromCart,amount:this.getAmount,cart:this.state.cart})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.a7bbbb7a.chunk.js.map